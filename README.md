# Karabo-Feedstock

This repository builds the [Conda](https://anaconda.org) non-conda-dependencies for the [Karabo pipeline](https://github.com/i4Ds/Karabo-Pipeline) so that a Karabo pipeline conda-wheel can be built. To do this, the individual packages must be triggered by `build * dependenc(y/ies) *` workflows, which orchestrate other workflows located in this repository. Since the number of workflows to be called is limited to 20 by GitHub, the whole process can unfortunately not be handled in a single workflow.

Since dependency-resolving of the Karabo pipeline can be difficult, for each Karabo release, associated conda-packages are build for it on [Conda i4Ds](https://anaconda.org/i4Ds/repo) with the appropriate conda-label matching the major and minor version of the Karabo pipeline. The label convention is: `rel_v{major}.{minor}`. Thus, for example, the Karabo release `v0.99.0` becomes the label `rel_v0.99`. This label must then be given when triggering the workflow (`Actions.{workflow-name}.Run workflow.label`). To keep this convention consistent with the Karabo releases, no incompatible dependency changes may be made for patch releases, since the patch is not part of the label convention.

Version management of the packages to be built is normally handled by the `build base (build_base.yml)` super workflow. In it, the versions of the packages can be updated to a new version. **Important:** There are also packages where version changes also require adjustments in the `conda build-recipe`, for example in `meta.yaml`. In it can be e.g. fixed git-commits or dependencies, which do not correspond any more with the updated version of the package to be built. The individual builds with version changes must be tested beforehand, before the Karabo release.